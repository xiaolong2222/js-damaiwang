<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>购物车</title>
    <link rel="stylesheet" href="css/index.css" />
    <link rel="stylesheet" href="css/login.css" />
    <link rel="stylesheet" href="css/cart.css" />
    <link rel="stylesheet" href="css/login.css" />
  </head>
  <body>
    <div class="header">
      <div class="header-tb">
        <a href="www.damai.cn">
          <img class="header-tb-logo" src="img/logo.png" alt="" />
        </a>
        <div class="header-left">
          <a class="header-shou" href="index.html">首页</a>
          <a class="header-shou" href="list.html">分类</a>
        </div>
        <div class="header-right">
          <div class="header-login">
            <img class="header-login-dl" src="img/biao3.png" alt="" />
            <a href="login.html"> </a>
            <div class="login-zt">
              <a href="login.html"> <span class="login-ld">登录</span></a>
            </div>
            <div class="login-zy">
              <div class="login-yc">
                <a class="login-yc-long" href="">个人信息</a>
                <a class="login-yc-long" href="">账号设置</a>
                <a class="login-yc-long" href="">订单管理</a>
              </div>
            </div>
          </div>
          <div class="header-cat">
            <img class="header-login-dl" src="img/biao4.png" alt="" />
            <span class="login-ld">下载</span>
            <div class="cat-yin">
              <img class="cat-yin-er" src="img/erweima2.png" alt="" />
            </div>
          </div>
        </div>
        <div class="header-conter">
          <img class="conter-shuo" src="img/biao5.png" alt="" />
          <input class="conter-input" placeholder="搜索明星、演出、体育赛事" />
          <div class="conter-dian">搜索</div>
        </div>
      </div>
    </div>
    <div class="tag">
      <div class="dm-item">
        <div class="dm-item-title">确认订单信息</div>
        <div class="next-table order-info-list">
          <div class="next-table-inner">
            <div class="next-table-header">
              <div class="next-table-header-inner">
                <table>
                  <colgroup>
                    <col style="width: 5%" />
                    <col style="width: 35%" />
                    <col style="width: 17%" />
                    <col style="width: 9%" />
                    <col style="width: 9%" />
                    <col style="width: 10%" />
                    <col style="width: 10%" />
                    <col style="width: 5%" />
                  </colgroup>
                  <tbody>
                    <tr>
                      <th rowspan="1" class="next-table-header-node seatInfo">
                        <input class="ocheckall" type="checkbox" />全选
                      </th>
                      <th
                        rowspan="1"
                        class="next-table-header-node first single"
                      >
                        <div
                          class="next-table-cell-wrapper"
                          data-spm-anchor-id="a2oeg.orderconfirm.0.i0.4afeLZdbLZdb5s"
                        >
                          项目信息
                        </div>
                      </th>
                      <th rowspan="1" class="next-table-header-node seatInfo">
                        <div class="next-table-cell-wrapper">座位信息</div>
                      </th>
                      <th rowspan="1" class="next-table-header-node">
                        <div class="next-table-cell-wrapper">单价</div>
                      </th>
                      <th rowspan="1" class="next-table-header-node">
                        <div class="next-table-cell-wrapper">数量</div>
                      </th>
                      <th rowspan="1" class="next-table-header-node">
                        <div class="next-table-cell-wrapper">优惠</div>
                      </th>
                      <th rowspan="1" class="next-table-header-node last">
                        <div class="next-table-cell-wrapper">小计</div>
                      </th>
                      <th rowspan="1" class="next-table-header-node">操作</th>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="next-table-body ad-nba">
              <!-- <table>
                <colgroup>
                  <col style="width: 5%" />
                  <col style="width: 35%" />
                  <col style="width: 17%" />
                  <col style="width: 9%" />
                  <col style="width: 9%" />
                  <col style="width: 10%" />
                  <col style="width: 15%" />
                </colgroup>
                <tbody>
                  <tr class="next-table-row last first">
                    <td><input type="checkbox" /></td>
                    <td
                      class="single next-table-cell first"
                      colspan="1"
                      rowspan="1"
                    >
                      <div class="next-table-cell-wrapper">
                        <div
                          class="next-row project-name-wrapper"
                          data-spm="list"
                        >
                          <div class="next-col project-name-img">
                            <img
                              src="http://img.alicdn.com/imgextra/https://img.alicdn.com/imgextra/i1/2251059038/O1CN01a72Xz32GdSMdSxZVs_!!2251059038.jpg"
                              data-spm="ditempic"
                            />
                          </div>
                          <div class="next-col project-name-right">
                            <div
                              class="next-row project-name"
                              data-spm="dtitle"
                            >
                              「明日争取」全国巡演 上海站
                            </div>
                            <div class="next-row project-name-perform">
                              <span>2021.12.15 20:00</span>
                            </div>
                            <div class="next-row project-name-venue">
                              上海 | Modernsky lab上海
                            </div>
                            <div class="next-row project-name-tips"></div>
                          </div>
                        </div>
                      </div>
                    </td>
                    <td class="seatInfo next-table-cell">
                      <div class="next-table-cell-wrapper">
                        <span class="no-seat">暂无座位信息</span>
                      </div>
                    </td>
                    <td class="next-table-cell">
                      <div class="next-table-cell-wrapper">368.00</div>
                    </td>
                    <td class="next-table-cell">
                      <div class="next-table-cell-wrapper vbcb">
                        <a href="">-</a>1 <a href="">+</a>
                      </div>
                    </td>
                    <td class="next-table-cell">
                      <div class="next-table-cell-wrapper">
                        <span class="no-discount">-</span>
                      </div>
                    </td>
                    <td class="next-table-cell last">
                      <div class="next-table-cell-wrapper">
                        <span class="total">368.00</span>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table> -->
            </div>
            <div class="detail-wrapper">
              <div class="dm-invoice">
                <div class="dm-invoice-title">开具发票:</div>
                <div
                  class="dm-invoice-content"
                  title="请在支付完成后，前往大麦APP开具发票"
                >
                  请在支付完成后，前往大麦APP开具发票
                </div>
                <div class="clear"></div>
              </div>
              <div class="detail-right">
                <div class="dm-pay-detail">
                  <div class="dm-pay-detail-title">配送方式:</div>
                  <div class="dm-pay-detail-content">电子票</div>
                  <div class="dm-pay-detail-price"></div>
                  <div class="clear"></div>
                </div>
              </div>
              <div class="clear"></div>
            </div>
          </div>
          <div class="order-pay-wrapper">
            <div class="order-pay-top">
              实付款:<span><em class="btns">368.00</em></span>
            </div>
          </div>
          <div class="submit-wrapper">
            <button
              type="button"
              class="next-btn next-btn-normal next-btn-medium"
            >
              提交订单
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="foot">
      <div class="footer">
        <ul class="footer-list">
          <li>
            <a href="//help.damai.cn" target="_blank" data-spm="flink0"
              >帮助中心</a
            >
          </li>
          <li class="footer__links__grep">|</li>

          <li>
            <a
              href="&#x2F;&#x2F;help.damai.cn&#x2F;helpPage.htm?pageId=69&amp;categoryId=30"
              target="_blank"
              data-spm="flink1"
              >公司介绍</a
            >
          </li>
          <li class="footer__links__grep">|</li>

          <li>
            <a
              href="&#x2F;&#x2F;help.damai.cn&#x2F;helpPage.htm?pageId=70&amp;categoryId=30"
              target="_blank"
              data-spm="flink2"
              >品牌识别</a
            >
          </li>
          <li class="footer__links__grep">|</li>

          <li>
            <a
              href="&#x2F;&#x2F;help.damai.cn&#x2F;helpPage.htm?pageId=72&amp;categoryId=30"
              target="_blank"
              data-spm="flink3"
              >公司大事记</a
            >
          </li>
          <li class="footer__links__grep">|</li>

          <li>
            <a
              href="&#x2F;&#x2F;help.damai.cn&#x2F;helpPage.htm?pageId=40&amp;categoryId=14"
              target="_blank"
              data-spm="flink4"
              >协议及隐私权政策</a
            >
          </li>
          <li class="footer__links__grep">|</li>

          <li>
            <a
              href="&#x2F;&#x2F;jubao.alibaba.com&#x2F;internet&#x2F;readme.htm?spm=a2o6e.search.0.0.72f44d15Votov6&amp;site=damai"
              target="_blank"
              data-spm="flink5"
              >廉正举报</a
            >
          </li>
          <li class="footer__links__grep">|</li>

          <li>
            <a
              href="&#x2F;&#x2F;help.damai.cn&#x2F;helpPage.htm?pageId=58&amp;categoryId=5"
              target="_blank"
              data-spm="flink6"
              >联系合作</a
            >
          </li>
          <li class="footer__links__grep">|</li>

          <li>
            <a
              href="&#x2F;&#x2F;job.alibaba.com&#x2F;zhaopin&#x2F;positionList.htm?keyWord=JXU1OTI3JXU5RUE2&amp;_input_charset=UTF-8"
              target="_blank"
              data-spm="flink7"
              >招聘信息</a
            >
          </li>
          <li class="footer__links__grep">|</li>

          <li>
            <a
              href="&#x2F;&#x2F;x.damai.cn&#x2F;markets&#x2F;special&#x2F;fangzhapian?spm=a2o6e.home.0.0.75df48d3hqGWGD&amp;wh_ttid=pc"
              target="_blank"
              data-spm="flink8"
              >防骗秘籍</a
            >
          </li>
        </ul>
        <div class="footer-ft">
          <div class="footer-ft-left">
            <a
              class="footer-ft-one"
              href="//www.damai.cn/?spm=a2o6e.home.0.0.591b48d3QzpG8B"
            >
              <img src="img/xiaotu.png" />
            </a>
            <div class="footer-ft-tu">
              <a>
                <img src="img/erweima2.png" alt="" />
                <span>APP下载</span>
              </a>
            </div>
          </div>
          <div class="footer-ft-fr">
            <div class="footer-ft-btn">
              <a
                href="//ai.alimebot.taobao.com/intl/index.htm?from=EtbcRzNj3U"
                class="footer__fr__contact__btn"
                >在线客服</a
              >
            </div>
            <ul class="footer__ft__words">
              <li class="footer__ft__certificate">
                <a
                  href="https://gw.alicdn.com/imgextra/i2/O1CN01J1OnUU1g76CE6kSh6_!!6000000004094-0-tps-2480-3507.jpg"
                  target="_blank"
                  >京ICP证031057号</a
                >
              </li>
              <li class="footer__ft__grep">|</li>
              <li class="footer__ft__certificate">
                <a
                  href="https://beian.miit.gov.cn/?spm=a2oeg.home.0.0.591b23e1E98i3V#/Integrated/recordQuery"
                  target="_blank"
                  >京ICP备11043884号</a
                >
              </li>
              <li class="footer__ft__grep">|</li>
              <li class="footer__ft__certificate">
                <a
                  href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502037341"
                  target="_blank"
                  >京公网安备11010502037341号</a
                >
              </li>
              <li class="footer__ft__grep">|</li>
              <li class="footer__ft__certificate">
                <a
                  href="https://gw.alicdn.com/tfs/TB144BRdO_1gK0jSZFqXXcpaXXa-4096-2889.png"
                  target="_blank"
                  >广播电视节目制作经营许可证 (京)字第02253号</a
                >
              </li>
            </ul>
            <ul class="footer__ft__words">
              <li class="footer__ft__certificate">
                <a
                  href="https://gw.alicdn.com/imgextra/i2/O1CN01tlZwxM1LiYeoBTfIB_!!6000000001333-0-tps-2480-3507.jpg"
                  target="_blank"
                  >网络文化经营许可证 京网文[2019]4082-420号</a
                >
              </li>
              <li class="footer__ft__grep">|</li>
              <li class="footer__ft__certificate">
                <a
                  href="https://gw.alicdn.com/imgextra/i1/O1CN01V4XPXw1TNxm6UL9RO_!!6000000002371-0-tps-1653-2339.jpg"
                  target="_blank"
                  >营业性演出许可证 京市演587号</a
                >
              </li>
            </ul>
            <ul class="footer__ft__words">
              <li class="footer__ft__certificate">
                北京红马传媒文化发展有限公司 版权所有
              </li>
              <li class="footer__ft__certificate">
                <a href="//www.damai.cn/?spm=a2o6e.home.0.0.591b48d3QzpG8B"
                  >大麦网</a
                >
              </li>
              <li>Copyright 2003-2020 All Rights Reserved</li>
            </ul>
            <ul class="footer__ft__words">
              <li>举报投诉邮箱：damai_tousu@member.alibaba.com</li>
            </ul>
            <div class="footer-kk">
              <a href="">
                <img class="kk-img1" src="img/1.png" />
              </a>

              <a href=""><img class="kk-img2" src="img/3.png" alt="" /></a>
              <a href=""><img class="kk-img3" src="img/5.png" alt="" /></a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="js/jquery.js"></script>
    <script src="js/list.js"></script>
    <script src="js/index.js"></script>
    <script src="js/cart.js"></script>
    <script>
      let btns = document.querySelector(".btns");
      console.log(btns);

      let ggian = document.querySelectorAll(".cart-jian");
      console.log(ggian);
      let ggia = document.querySelectorAll(".cart-jia");
      console.log(ggian);
      let ginpu = document.querySelectorAll(".cart-input");
      //全部总价
      function getTotalPrice() {
        //取到所有选中的单个复选框对应的某种商品的总价之和
        let total = document.querySelectorAll(".total");
        let ck = document.querySelectorAll(".cheak");
        let totalPrice = 0;
        for (let i = 0; i < ck.length; i++) {
          if (ck[i].checked) {
            totalPrice += Number(total[i].innerText);
          }
        }

        let btns = document.querySelector(".btns"); //放总价的结构
        btns.innerText = totalPrice;
      }
      getTotalPrice();
      for (let i = 0; i < ggian.length; i++) {
        ggian[i].addEventListener("click", function () {
          ginpu[i].value--;
          if (ginpu[i].value < 1) {
            ginpu[i].value = 1;
          }
          let id = this.getAttribute("data-id");
          console.log(id);
          $.ajax({
            url: "http://jx.xuzhixiang.top/ap/api/cart-update-num.php",
            type: "get",
            data: {
              uid: 74824,
              pid: id,
              pnum: ginpu[i].value,
            },
            success: function (data) {
              console.log(data);
            },
          });
          //减号 单个总价
          let total = document.querySelectorAll(".total");

          let danjia = document.querySelectorAll(".jiage");

          total[i].innerText = ginpu[i].value * danjia[i].innerText;
          getTotalPrice();
        });
        ggia[i].addEventListener("click", function () {
          ginpu[i].value++;
          let id = this.getAttribute("data-id");
          $.ajax({
            url: "http://jx.xuzhixiang.top/ap/api/cart-update-num.php",
            type: "get",
            data: {
              uid: 74824,
              pid: id,
              pnum: ginpu[i].value,
            },
            success: function (data) {
              console.log(data);
            },
          });
          //加号  单个总价
          let total = document.querySelectorAll(".total");

          let danjia = document.querySelectorAll(".jiage");

          total[i].innerText = ginpu[i].value * danjia[i].innerText;
          getTotalPrice();
        });
      }
      //删除
      let sancu = document.querySelectorAll(".sancu");
      console.log(sancu);
      let zuida = document.querySelectorAll(".zuidade");
      console.log(zuida);
      for (let j = 0; j < sancu.length; j++) {
        sancu[j].addEventListener("click", function () {
          console.log(22);
          zuida[j].remove();
          let id = this.getAttribute("data-id");
          $.ajax({
            url: "http://jx.xuzhixiang.top/ap/api/cart-delete.php",
            type: "get",
            data: {
              uid: 74824,
              pid: id,
            },
            success: function (data) {
              console.log(data);
            },
          });
          getTotalPrice();
        });
      }
      let ck = document.querySelectorAll(".cheak");
      let oCheckAll = document.querySelector(".ocheckall");
      oCheckAll.onclick = () => {
        for (let i = 0; i < ck.length; i++) {
          ck[i].checked = oCheckAll.checked;
        }
        getTotalPrice();
      };
      //单个复选框
      for (let i = 0; i < ck.length; i++) {
        ck[i].onclick = () => {
          let count = 0; //保存的是选中的数量
          for (let j = 0; j < ck.length; j++) {
            if (ck[j].checked) {
              count++;
            }
          }
          //判断选中的数量和总数量是否一致
          if (count == ck.length) {
            oCheckAll.checked = true;
          } else {
            oCheckAll.checked = false;
          }
          getTotalPrice();
        };
      }
    </script>
  </body>
</html>
